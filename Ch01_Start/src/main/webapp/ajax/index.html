<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSP::AJAX::DB</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
	$(function(){
		$("#id01").on("click",function(){
			alert("데이터 요청");
			$.ajax({
				url:"dbfrom.jsp",
				type:"get",
				success:function(t){
					alert("요청 성공");
					$(t).find("person").each(function(){
						var name = $(this).find('name').text();
						var age = $(this).find('age').text();
						var salary = $(this).find('salary').text();
						// this => 날라온 놈의 person
						$('<h1></h1>').text(name + " "+ age +" " + salary).appendTo('body');
						
					});
					
					//$('body').append(data);
				},
				error: function(){
					alert("실패");
				}
			});
		});
		
		$("#id02").on("click", function(){
			alert("데이터 전송")
			$.ajax({
				url:"dbto.jsp",
				type:'post',
				data:{
					name: $("#name1").val(),
					age: $("#age1").val(),
					salary: $("#salary1").val()
				},
				success:function(){
					alert("jsp 문서 가져오기 성공!");
				},
				error:function(){
					alert("전송 실패...");
				}
				
			});
		});
		
	});
</script>
</head>
<body>
<button id="id01">데이터 요청(Select_dbfrom)</button><br><br>
이름: <input type="text" id="name1"><br>
나이: <input type="text" id="age1" ><br>
급여: <input type="text" id="salary1"><br>

<button id="id02">DB 전송(Insert_dbto)</button><br><br>


<p id="result"></p>
</body>
</html>